<openerp>
<data>

<!-- 
##############################
fleet.mro.driver_report
##############################
-->
<!-- SEARCH View for fleet.mro.driver_report  --> 
    <record id="view_fleet_mro_driver_report_search" model="ir.ui.view">
      <field name="name">fleet.mro.driver_report.search</field>
      <field name="model">fleet.mro.driver_report</field>
      <field name="type">search</field>
      <field name="arch" type="xml">
        <search string="Fleet MRO Driver Report of Vehicle Failure">
          <filter string="Draft" domain="[('state','=','draft')]"/>
          <separator orientation="vertical"/>
          <filter string="Confirmed" domain="[('state','=','confirmed')]"/>
          <separator orientation="vertical"/>
          <filter string="Closed" domain="[('state','=','closed')]"/>
          <separator orientation="vertical"/>
          <filter string="Cancelled" domain="[('state','=','cancel')]"/>
          <filter string="Not Cancelled" domain="[('state','!=','cancel')]" name="not_cancelled"/>
          <filter string="Not Closed" domain="[('state','!=','closed')]" name="not_closed"/>
          <filter string="From this month" domain="[('date','&gt;=', time.strftime('%%Y-%%m-01'))]" name="this_month" />
          <newline/>
          <field name="name"/>
          <field name="date"/>
          <field name="vehicle_id"/>
          <field name="employee_id"/>
          <newline/>
          <group  expand='0' string='Group by...'>
            <filter string='Vehicle' domain="[]" context="{'group_by' : 'vehicle_id'}" />
            <filter string='Driver' domain="[]" context="{'group_by' : 'employee_id'}" />
            <separator orientation="vertical"/>                                                                
            <filter string='State' domain="[]" context="{'group_by' : 'state'}" />
            <separator orientation="vertical"/>                                                                
            <filter string='Date' domain="[]" context="{'group_by' : 'date'}" />
          </group>
        </search>
      </field>
    </record>

<!-- TREE View for fleet.mro.driver_report  -->
    <record model="ir.ui.view" id="view_fleet_mro_driver_report_tree">
      <field name="name">fleet.mro.driver_report.tree</field>
      <field name="model">fleet.mro.driver_report</field>
      <field name="type">tree</field>
      <field name="arch" type="xml">
        <tree string="Fleet MRO Driver Report of Vehicle Failure" colors="gray:state=='cancel';red:state=='draft';blue:state=='confirmed';">
            <field name="name" />
            <field name="date" />
            <field name="vehicle_id" />
            <field name="employee_id" />
            <field name="solved" />
            <field name="date_end_real" />
            <field name="state" />
            <button name="action_confirm" states="draft" string="Confirm" type="object" groups="fleet_mro.group_report_confirm"/>
	   </tree>
      </field>
    </record>
	
<!-- FORM View for fleet.mro.driver_report -->
    <record id="view_fleet_mro_driver_report_form" model="ir.ui.view">
      <field name="name">fleet.mro.driver_report.form</field>
      <field name="model">fleet.mro.driver_report</field>
      <field name="type">form</field>
      <field name="arch" type="xml">
        <form string="Report of Vehicle Failure">
          <header>
            <button name="action_cancel_draft" states="cancel" string="Set to Draft" type="object" groups="fleet_mro.group_report_setdraft" />
            <button name="action_cancel" states="draft,confirmed" string="Cancel" type="object" groups="fleet_mro.group_report_cancel"/>
            <button name="action_confirm" states="draft" string="Confirm" type="object" class="oe_highlight" groups="fleet_mro.group_report_confirm"/>
            <field name="state" widget="statusbar" statusbar_visible="draft,confirmed,closed" statusbar_colors='{"cancel":"red"}'/>
          </header>
          <sheet>
            <h1>
              <field name="name" class="oe_inline" readonly="1" nolabel="1"/>
            </h1>
            <group colspan="4" col="4">
                <field name="date" />
                <field name="operating_unit_id" />
                <field name="vehicle_id" />
                <field name="employee_id" /><!-- domain="[('tms_category','=','driver')]"/> PARA MODULO TMS_AND_MRO -->
                <field name="order_id"/>
                <field name="date_end_real"/> 
                <field name="solved"/>
                <newline />
                    <separator string="Description" colspan="4" />
                    <field name="notes" colspan="4" nolabel="1" required="1"/>
            </group>
          </sheet>
          <div class="oe_chatter">
            <field name="message_follower_ids" widget="mail_followers"/>
            <field name="message_ids" widget="mail_thread" placeholder="Share a message..."/>
          </div>
        </form>
      </field>
    </record>

<!-- Action for fleet.mro.driver_report -->
    <record model="ir.actions.act_window" id="open_view_fleet_mro_driver_report_form">
        <field name="name">Fleet MRO Driver Report of Vehicle Failure</field>
        <field name="res_model">fleet.mro.driver_report</field>
        <field name="context">{'search_default_this_month': 1}</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
    </record>
    
    <!--<menuitem id="menu_tms_driver_report" name="Vehicle Failure Reports" parent="menu_fleet_mro" sequence="30"/>-->

<!-- Menu for fleet.mro.driver_report -->
    <menuitem name="Vehicle Failure Report" sequence="10"
              parent="menu_fleet_mro_orders" 
              id="menu_fleet_mro_driver_report_form" 
              action="open_view_fleet_mro_driver_report_form"/>

	
</data>
</openerp>
