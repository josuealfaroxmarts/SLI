<openerp>
<data>

    <!--
        <record id="fleet_mro_product_template_search_view" model="ir.ui.view">
            <field name="name">fleet_mro.product.template.search</field>
            <field name="model">product.template</field>
            <field name="priority">50</field>
            <field name="inherit_id" ref="product.product_template_search_view"/>
            <field name="arch" type="xml">
               <filter name="consumable" position="replace">
                   <filter string="Products" name="stockable" domain="[('type','=','product')]" 
                           help="Products your store in the inventory"/>
                </filter>
                <filter name="filter_to_sell" position="before">
                    <separator/>
                    <filter string="Waybill Freight" name="freight" domain="[('fleet_mro_category','=','freight')]"/>
                    <filter string="Waybill Related"
                             domain="[('fleet_mro_category','in',('freight','move','insurance','highway_tolls','other'))]"/>
                     <filter string="Travel Expense Related" 
                             domain="[('fleet_mro_category','in',('real_expense','salary','salary_retention','salary_discount','negative_balance','fuel','madeup_expense'))]"/>
                     <filter string="Indirect Expense (Agreements)" domain="[('fleet_mro_category','=','indirect_expense')]" name="indirect_expense"/>
                </filter>
                <field name="pricelist_id" position="after">
                    <filter string='fleet_mro Type' domain="[]" name="fleet_mro_type" context="{'group_by' : 'fleet_mro_category'}"/>
                </field>
            </field>
        </record>

        <record model="ir.ui.view" id="fleet_mro_product_template_tree_view">
            <field name="name">fleet_mro product.template.tree</field>
            <field name="model">product.template</field>
            <field name="type">form</field>
            <field name="priority">50</field>
            <field name="inherit_id" ref="product.product_template_tree_view"/>
            <field name="arch" type="xml">
              <field name="type" position="before" >
                <field name="fleet_mro_category" />
              </field>
            </field>
        </record>
        -->

        <record model="ir.ui.view" id="fleet_mro_product_template_form_view">
            <field name="name">fleet_mro.product.normal.form</field>
            <field name="model">product.template</field>
            <field name="type">form</field>
            <field name="priority">50</field>
            <field name="inherit_id" ref="product.product_template_form_view"/>
            <field name="arch" type="xml">
                <group name="group_standard_price" position="after">
                    <group name="fleet_mro" colspan="4" col="4" string="Fleet MRO Task Details" 
                           attrs="{'invisible':[('fleet_mro_task','=',False)]}">
                        <field name="duration" widget="float_time"
                                attrs="{'invisible':[('fleet_mro_task','=',False)],'required':[('fleet_mro_task','=',True)]}"/>
                        <field name="fleet_vehicle_model_ids" widget="many2many_tags" />
                        <field name="sub_tasks" />
                        <newline />
                        <field name="child_ids" colspan="4" nolabel="1"
                               context="{'default_fleet_mro_task':True,'default_type':'service'}"
                               domain="[('fleet_mro_task','=',True),('id','!=',active_id)]"
                              attrs="{'invisible':[('sub_tasks','=',False)],'required':[('sub_tasks','=',True)]}">
                            <tree>
                                <field name="default_code"/>
                                <field name="name"/>
                                <field name="duration_total" widget="float_time"/>
                                <field name="sub_tasks"/>
                                <field name="child_ids" widget="many2many_tags"/>
                                <field name="duration_total" widget="float_time"/>
                            </tree>
                        </field>
                        <field name="duration_childs" invisible="1"/>
                        <newline />
                        <field name="duration_total" attrs="{'invisible':[('sub_tasks','=',False)]}" widget="float_time"/>
                        <field name="fleet_mro_task" invisible="1"/>
                    </group>
                </group>
            </field>
        </record>

        <record id="fleet_mro_product_normal_action" model="ir.actions.act_window">
            <field name="name">Spare Parts</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">product.product</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,kanban</field>
            <field name="view_id" ref="product.product_product_tree_view"/> 
            <field name="search_view_id" ref="product.product_template_search_view"/>
            <field name="domain">[('type','=','product')]</field>
            <field name="context">{
                    'default_type'         : 'product',
                    'default_purchase_ok'  : 1,
                }
            </field>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to define a new product.
              </p><p>
                You must define a product to be used in MRO.
              </p>
            </field>
        </record>


        <record id="fleet_mro_task_product_normal_action" model="ir.actions.act_window">
            <field name="name">Tasks</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">product.product</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,kanban</field>
            <field name="view_id" ref="product.product_product_tree_view"/> 
            <field name="search_view_id" ref="product.product_template_search_view"/>
            <field name="domain">[('type','=','service'),('fleet_mro_task','=',1)]</field>
            <field name="context">{
                    'default_type'           : 'service',
                    'default_fleet_mro_task' : 1,
                }
            </field>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to define a new Tasks.
              </p><p>
                You must define Tasks to be used in MRO Fleet Service Orders.
              </p>
            </field>
        </record>        


        <record id="fleet_vehicle_model_view_form_fleet_mro" model="ir.ui.view">
            <field name="name">fleet.vehicle.model.fleet_mro.form</field>
            <field name="model">fleet.vehicle.model</field>
            <field name="type">form</field>
            <field name="inherit_id" ref="fleet.fleet_vehicle_model_view_form"/>
            <field name="arch" type="xml">
                <notebook position="inside">
                    <page string="MRO Related Tasks">
                        <field name="task_ids" nolabel="1" colspan="4"/>
                    </page>
                </notebook>
            </field>
        </record>


</data>
</openerp>

