<odoo>
    <data>

        
        <!-- ### MENUS ### -->
        <menuitem id="menu_fleet_mro" name="Fleet MRO"
                  web_icon="fleet_mro,static/description/icon.png"/>
	    <menuitem id="menu_fleet_mro_preorders" name="Preliminar" parent="menu_fleet_mro" sequence="9"/>
        <menuitem id="menu_fleet_mro_orders" name="Maintenance" parent="menu_fleet_mro" sequence="10"/>

	    <menuitem action="fleet.fleet_vehicle_odometer_action" parent="menu_fleet_mro_orders" 
                  id="fleet_mro_fleet_vehicle_odometer_menu" groups="fleet.fleet_group_user" sequence="90"/>

	    <menuitem id="menu_fleet_mro_kiosk" name="Tasks by Mechanics" parent="menu_fleet_mro" sequence="20"/>
	    <menuitem id="menu_fleet_mro_analysis" name="MRO Analisys" parent="menu_fleet_mro" sequence="40"/>
	    <menuitem id="menu_fleet_mro_config" name="Configuration" parent="menu_fleet_mro" sequence="50"/>
        
        <record id="action_operating_unit_fleet_mro" model="ir.actions.act_window">
            <field name="name">Operating Units</field>
            <field name="res_model">operating.unit</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="search_view_id" ref="operating_unit.view_operating_unit_search"/>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Create Operating Units, the first step to start managing Fleet MRO Workshop.
              </p><p>
                These Operating Units will be used in ALL records so you can have information for each Branch Operating Unit and Central Headquarters
              </p>
            </field>
        </record>

        <menuitem id="menu_operating_unit" 
                  action="action_operating_unit_fleet_mro" 
                  name="Operating Units"
                  parent="menu_fleet_mro_config" 
                  groups="base.group_no_one"
                  sequence="1"/>        
        
        <menuitem id="menu_fleet_mro_config_vehicle" name="Vehicles Configuration" parent="menu_fleet_mro_config" sequence="50"/>

        <menuitem id="menu_fleet_mro_config_product" name="Maintenance Config" parent="menu_fleet_mro_config" sequence="60"/>
        <menuitem id="menu_fleet_mro_config_hr" name="HR Config" parent="menu_fleet_mro_config" sequence="70"/>
        <menuitem id="menu_fleet_mro_program" name="Maintenance Program" parent="menu_fleet_mro_analysis" sequence="90"/>

        
#### MRO HR Related
    <menuitem action="action_hr_employee_mro_productive_type" id="menu_hr_employee_mro_productive_types" 
              name="Task Productive Categs"
              parent="menu_fleet_mro_config_hr" sequence="20"/>
        
  #### Product Related
        
        <menuitem action="fleet_mro_product_normal_action" 
                  id="menu_fleet_mro_config_product_product" 
                  parent="menu_fleet_mro_config" 
                  sequence="2"/>


        <menuitem action="product.product_category_action_form" 
                  id="menu_fleet_mro_config_product_product_category"
                  parent="menu_fleet_mro_config" 
                  sequence="2"/>
        
    #####################################################################################
    #### MRO Tasks
    #####################################################################################
    <menuitem action="fleet_mro_task_product_normal_action" id="menu_fleet_mro_tasks" name="Tasks"
              parent="menu_fleet_mro_config_product" sequence="21"/>    
 
        
    #####################################################################################
    #### MRO Service Type
    #####################################################################################
    <!-- Inheritance for ir.sequence to assign a Sequence for each office -->
    <record model="ir.ui.view" id="fleet_mro_type_form">
        <field name="name">fleet.mro.type.form</field>
        <field name="model">fleet.mro.type</field>
        <field name="type">form</field>
        <field name="priority">50</field>
        <field name="arch" type="xml">
            <form string="Maintenance Service Type">
               <sheet>
                   <div class="oe_button_box" name="button_box">
                        <button name="toggle_active" type="object" groups="base.group_user"
                                class="oe_stat_button" icon="fa-archive">
                            <field name="active" widget="boolean_button"
                                options='{"terminology": "archive"}'/>
                        </button>
                    </div>
                    <group col="4">
                        <group colspan="1" col="1">
                            <div>
                                <h1>
                                    <label for="code" class="oe_edit_only" />
                                    <field name="code" placeholder="Code..." nolabel="1" />
                                </h1>
                            </div>
                        </group>
                        <group colspan="3" col="2">
                            <div>
                                <h1>
                                    <label for="name" class="oe_edit_only"/>
                                    <field name="name" placeholder="MRO Service name, Example: Preventive Maintenance"  nolabel="1" />
                                </h1>
                            </div>
                        </group>
                    </group>
                    <group colspan="4" col="4">
                        <field name="preventive" />
                        <newline />
                        <separator string="Stock Configuration for Spare Parts Warehouse" colspan="4" 
                                style="font-size:14px;font-weigth:bold;"/>
                        <field name="warehouse_id" />
                        <field name="stock_picking_type" domain="[('code','=','internal'),('warehouse_id','=',warehouse_id)]"/>
                        <newline />
                        <separator string="Stock Operations Types for External Workshop" colspan="4" 
                            style="font-size:14px;font-weigth:bold;"/>
                        <field name="purchase_picking_type" domain="[('code','=','incoming')]"/>
                        <field name="dropship_picking_type" domain="[('code','=','incoming')]"/>
                        <newline />
                        <field name="company_id" options="{'no_create': True}" groups="base.group_multi_company"/>
                        <newline />
                        <separator string="Restrict Service Type to the following Vehicle Models" colspan="4"/>
                        <field name="fleet_vehicle_model_ids" nolabel="1" colspan="4" widget="many2many_tags"/>
                        <field name="notes" nolabel="1" placeholder="Notes" colspan="4"/>
                    </group>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
            </form>
        </field>
    </record>
    

    <record model="ir.ui.view" id="fleet_mro_type_tree">
        <field name="name">fleet.mro.type.tree</field>
        <field name="model">fleet.mro.type</field>
        <field name="priority">10</field>
        <field name="arch" type="xml">
            <tree string="Maintenance Service Type">
                <field name="code"/>
                <field name="name"/>
                <field name="preventive" />
                <field name="warehouse_id" />
                <field name="stock_picking_type" domain="[('code','=','internal'),('warehouse_id','=',warehouse_id)]"/>
                <field name="company_id" groups="base.group_multi_company"/>
            </tree>
        </field>
    </record>    

    
    <record model="ir.ui.view" id="fleet_mro_type_search">
        <field name="name">fleet.mro.type.search</field>
        <field name="model">fleet.mro.type</field>
        <field name="priority">10</field>
        <field name="arch" type="xml">
            <search string="Maintenance Service Type">
                <filter string="Preventive Service" domain="[('preventive','=',1)]"/>
                <field name="name" filter_domain="['|', ('name','ilike',self), ('code','=like',str(self)+'%')]" string="MRO Type"/>
                <field name="warehouse_id" />
                <field name="stock_picking_type" domain="[('code','=','internal'),('warehouse_id','=',warehouse_id)]"/>
                <group expand="0" string="Group By...">
                    <filter string="Preventive" domain="[]" context="{'group_by':'preventive'}"/>
                    <filter string="Stock Picking Type" domain="[]" context="{'group_by':'stock_picking_type'}"/>
                </group>
            </search>
        </field>
    </record>
    
    
    <record id="action_fleet_mro_type" model="ir.actions.act_window">
        <field name="name">Service Types</field>
        <field name="res_model">fleet.mro.type</field>
        <field name="type">ir.actions.act_window</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="search_view_id" ref="fleet_mro.fleet_mro_type_search"/>
        <field name="help" type="html">
          <p class="oe_view_nocontent_create">
            Create Maintenance Service Types.
          </p><p>
            These will be used to define why a Service Mainenance Order is open.
          </p>
        </field>
    </record>        
        
        
    <menuitem action="action_fleet_mro_type" id="menu_fleet_mro_types" name="Service Types"
              parent="menu_fleet_mro_config_product" sequence="20"/>
        

    #####################################################################################
    #### MRO Maintentance Cycles
    #####################################################################################
    <record model="ir.ui.view" id="fleet_mro_cycle_form">
        <field name="name">fleet.mro.cycle.form</field>
        <field name="model">fleet.mro.cycle</field>
        <field name="type">form</field>
        <field name="priority">50</field>
        <field name="arch" type="xml">            
            <form string="Maintentance Cycles">
               <sheet>
                   <div class="oe_button_box" name="button_box">
                        <button name="toggle_active" type="object" groups="base.group_user"
                                class="oe_stat_button" icon="fa-archive">
                            <field name="active" widget="boolean_button"
                                options='{"terminology": "archive"}'/>
                        </button>
                    </div>
                    <group col="4">
                        <group colspan="1" col="1">
                            <div>
                                <h1>
                                    <label for="code" class="oe_edit_only" />
                                    <field name="code" placeholder="Code..." nolabel="1" />
                                </h1>
                            </div>
                        </group>
                        <group colspan="3" col="2">
                            <div>
                                <h1>
                                    <label for="name" class="oe_edit_only"/>
                                    <field name="name" placeholder="Cycle name, Example: Preventive every 20k kms"  nolabel="1" />
                                </h1>
                            </div>
                        </group>
                    </group>
                    <group colspan="4" col="4">
                        <field name="frequency" />
                        <field name="company_id" options="{'no_create': True}" groups="base.group_multi_company"/>
                        <separator string="Tasks in this Cycle" colspan="4" />
                        <field name="task_ids" nolabel="1" colspan="4"
                               context="{'default_fleet_mro_task':True,'default_type':'service'}"
                               domain="[('fleet_mro_task','=',True)]"/>
                        <separator string="Cycles included in this Cycle" colspan="4" />
                        <field name="cycle_ids" nolabel="1" colspan="4"/>
                        <separator string=".·.·.·.·.·.·." colspan="4" />
                        <field name="notes" nolabel="1" placeholder="Notes..." colspan="4"/>
                    </group>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
            </form>
        </field>
    </record>
    

    <record model="ir.ui.view" id="fleet_mro_cycle_tree">
        <field name="name">fleet.mro.cycle.tree</field>
        <field name="model">fleet.mro.cycle</field>
        <field name="priority">10</field>
        <field name="arch" type="xml">
            <tree string="Maintentance Cycles">
                <field name="code" />
                <field name="name"/>
                <field name="frequency" />
                <field name="cycle_ids" />
                <field name="company_id" groups="base.group_multi_company"/>
            </tree>
        </field>
    </record>    

    
    <record model="ir.ui.view" id="fleet_mro_cycle_search">
        <field name="name">fleet.mro.cycle.search</field>
        <field name="model">fleet.mro.cycle</field>
        <field name="priority">10</field>
        <field name="arch" type="xml">
            <search string="Maintentance Cycles">
                <field name="name" filter_domain="['|', ('name','ilike',self), ('code','=like',str(self)+'%')]" string="Task"/>
                <field name="task_ids"/>
                <field name="cycle_ids"/>
                <field name="frequency"/>
                <group expand="0" string="Group By...">
                    <filter string="Frequency" domain="[]" context="{'group_by':'frequency'}"/>
                </group>
            </search>
        </field>
    </record>
    
    
    <record id="action_fleet_mro_cycle" model="ir.actions.act_window">
        <field name="name">Maintenance Cycles</field>
        <field name="res_model">fleet.mro.cycle</field>
        <field name="type">ir.actions.act_window</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="search_view_id" ref="fleet_mro.fleet_mro_cycle_search"/>
        <field name="help" type="html">
          <p class="oe_view_nocontent_create">
            Create Maintenance Cycles.
          </p><p>
            These will be used to define Preventive Maintenance Program
          </p>
        </field>
    </record>        
        
        
    <menuitem action="action_fleet_mro_cycle" id="menu_fleet_mro_cycles" name="Maintenance Cycles"
              parent="menu_fleet_mro_config_product" sequence="23"/>
                

    #####################################################################################
    #### MRO Preventive Maintentance Program
    #####################################################################################
    <record model="ir.ui.view" id="fleet_mro_program_form">
        <field name="name">fleet.mro.program.form</field>
        <field name="model">fleet.mro.program</field>
        <field name="type">form</field>
        <field name="priority">50</field>
        <field name="arch" type="xml">            
            <form string="Preventive Maintentance Program">
               <sheet>
                  <div class="oe_button_box" name="button_box">
                        <button name="toggle_active" type="object" groups="base.group_user"
                                class="oe_stat_button" icon="fa-archive">
                            <field name="active" widget="boolean_button"
                                options='{"terminology": "archive"}'/>
                        </button>
                    </div>
                    <group col="4">
                        <group colspan="1" col="1">
                            <div>
                                <h1>
                                    <label for="code" class="oe_edit_only" />
                                    <field name="code" placeholder="Code..." nolabel="1" />
                                </h1>
                            </div>
                        </group>
                        <group colspan="3" col="2">
                            <div>
                                <h1>
                                    <label for="name" class="oe_edit_only"/>
                                    <field name="name" placeholder="Program name, Example: Cargo Vehicle Preventive Program"  nolabel="1" />
                                </h1>
                            </div>
                        </group>
                    </group>
                    <group colspan="4" col="4">
                        <field name="company_id" options="{'no_create': True}" groups="base.group_multi_company"/>
                        <newline />
                        <separator string="Cycles in this Maintenance Program" colspan="4" />
                        <field name="cycle_ids" nolabel="1" colspan="4"/>
                        <separator string="Notes" colspan="4" />
                        <field name="notes" nolabel="1" placeholder="Notes" colspan="4"/>
                    </group>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
            </form>
        </field>
    </record>
    

    <record model="ir.ui.view" id="fleet_mro_program_tree">
        <field name="name">fleet.mro.program.tree</field>
        <field name="model">fleet.mro.program</field>
        <field name="priority">10</field>
        <field name="arch" type="xml">
            <tree string="Preventive Maintentance Program">
                <field name="code" />
                <field name="name"/>
                <field name="notes" />
                <field name="company_id" groups="base.group_multi_company"/>
            </tree>
        </field>
    </record>    

    
    <record model="ir.ui.view" id="fleet_mro_program_search">
        <field name="name">fleet.mro.program.search</field>
        <field name="model">fleet.mro.program</field>
        <field name="priority">10</field>
        <field name="arch" type="xml">
            <search string="Preventive Maintentance Program">
                <field name="name" filter_domain="['|', ('name','ilike',self), ('code','=like',str(self)+'%')]" string="Maintenance Program"/>
                <field name="notes"/>
            </search>
        </field>
    </record>
    
    
    <record id="action_fleet_mro_program" model="ir.actions.act_window">
        <field name="name">Maintenance Programs</field>
        <field name="res_model">fleet.mro.program</field>
        <field name="type">ir.actions.act_window</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="search_view_id" ref="fleet_mro.fleet_mro_program_search"/>
        <field name="help" type="html">
          <p class="oe_view_nocontent_create">
            Create Preventive Maintenance Program.
          </p><p>
            These will be used to define Preventive Maintenance Programs to use with our vehicles.
          </p>
        </field>
    </record>        
        
        
    <menuitem action="action_fleet_mro_program" id="menu_fleet_mro_programs" name="Maintenance Programs"
              parent="menu_fleet_mro_config_product" sequence="24"/>
        
        
    </data>
</odoo>
